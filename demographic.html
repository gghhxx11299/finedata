<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Demographic Data - Finedatas Ethiopia</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Montserrat:wght@700;800&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* Global Styles */
        :root {
            --bg-color: #0D1117;
            --card-bg: #161B22;
            --primary-color: #58A6FF;
            --secondary-color: #FF7B72;
            --text-color: #C9D1D9;
            --border-color: #30363D;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
            --hover-shadow: 0 8px 20px rgba(0, 0, 0, 0.7);
        }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        html {
            font-size: 16px;
        }
        body {
            font-family: 'Inter', sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--bg-color);
            overflow-x: hidden;
        }
        h1, h2, h3, h4 {
            font-family: 'Montserrat', sans-serif;
            font-weight: 700;
        }
        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 15px;
        }
        
        /* Header Styles - Mobile First */
        header {
            background-color: var(--card-bg);
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 100;
            border-bottom: 1px solid var(--border-color);
            padding: 0.5rem 0;
        }
        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.5rem 0;
            flex-wrap: wrap;
        }
        .logo {
            display: flex;
            align-items: center;
            flex-shrink: 0;
        }
        .logo img {
            height: 35px;
            margin-right: 8px;
        }
        .logo h1 {
            color: var(--primary-color);
            font-size: 1.3rem;
            white-space: nowrap;
        }
        .nav-links {
            display: none;
            flex-direction: column;
            position: absolute;
            top: 100%;
            left: 0;
            width: 100%;
            background-color: var(--card-bg);
            box-shadow: var(--shadow);
            padding: 1rem 0;
            border-top: 1px solid var(--border-color);
            z-index: 99;
            max-height: 80vh;
            overflow-y: auto;
        }
        .nav-links.active {
            display: flex;
        }
        .nav-links li {
            margin: 0.3rem 1.5rem;
            width: calc(100% - 3rem);
        }
        .nav-links a {
            text-decoration: none;
            color: var(--text-color);
            font-weight: 500;
            transition: color 0.3s;
            display: block;
            padding: 0.5rem 0;
            font-size: 0.95rem;
        }
        .nav-links a:hover, .nav-links a.active {
            color: var(--primary-color);
        }
        .btn {
            background-color: var(--primary-color);
            color: var(--bg-color);
            padding: 8px 16px;
            border-radius: 6px;
            font-weight: 600;
            transition: all 0.3s ease;
            white-space: nowrap;
            font-size: 0.9rem;
            display: inline-block;
            width: 100%;
            text-align: center;
            margin: 0.3rem 0;
        }
        .btn:hover {
            background-color: var(--secondary-color);
            color: #FFFFFF;
            box-shadow: 0 0 10px var(--secondary-color), 0 0 20px var(--secondary-color);
        }
        .mobile-menu-btn {
            display: block;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--primary-color);
            padding: 0.3rem;
        }
        /* Export Button */
        .export-btn {
            background: none;
            border: 1px solid var(--primary-color);
            color: var(--primary-color);
            padding: 6px 12px;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 0.3rem 0;
            white-space: nowrap;
            font-size: 0.9rem;
            display: inline-block;
            width: 100%;
            text-align: center;
        }
        .export-btn:hover {
            background-color: rgba(88, 166, 255, 0.1);
        }
        
        /* Page Header */
        .page-header {
            background: linear-gradient(rgba(13, 17, 23, 0.9), rgba(13, 17, 23, 0.9)), url('https://images.unsplash.com/photo-1571835782488-179d2c6eecb1?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80');
            color: var(--text-color);
            padding: 2rem 0;
            text-align: center;
            margin-bottom: 1.5rem;
            border-bottom: 1px solid var(--border-color);
        }
        .page-header h2 {
            font-size: 1.8rem;
            margin-bottom: 1rem;
            color: var(--primary-color);
            line-height: 1.3;
        }
        .breadcrumb {
            display: flex;
            justify-content: center;
            list-style: none;
            flex-wrap: wrap;
        }
        .breadcrumb li {
            margin: 0 0.3rem;
            font-size: 0.9rem;
        }
        .breadcrumb li:not(:last-child)::after {
            content: ">";
            margin-left: 0.5rem;
            color: var(--secondary-color);
        }
        .breadcrumb a {
            color: var(--text-color);
            text-decoration: none;
        }
        .breadcrumb a:hover {
            color: var(--primary-color);
        }
        
        /* Demographic Sections */
        .demographic-section {
            background-color: var(--card-bg);
            border-radius: 10px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: var(--shadow);
            border: 1px solid var(--border-color);
        }
        .section-title {
            color: var(--primary-color);
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 0.5rem;
            margin-bottom: 1.2rem;
            display: flex;
            align-items: center;
            font-size: 1.3rem;
        }
        .section-title i {
            margin-right: 0.5rem;
            color: var(--secondary-color);
            font-size: 1.2rem;
        }
        .data-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1rem;
            margin-top: 1.2rem;
        }
        .data-card {
            background-color: var(--bg-color);
            border-radius: 10px;
            padding: 1.2rem;
            box-shadow: var(--shadow);
            transition: transform 0.3s ease;
            border: 1px solid var(--border-color);
        }
        .data-card:hover {
            transform: translateY(-3px);
            box-shadow: var(--hover-shadow);
            border-color: var(--primary-color);
        }
        .data-card h4 {
            color: var(--primary-color);
            margin-bottom: 0.8rem;
            display: flex;
            align-items: center;
            font-size: 1.1rem;
        }
        .data-card h4 i {
            margin-right: 0.5rem;
            color: var(--secondary-color);
            font-size: 1rem;
        }
        .stat-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--primary-color);
            margin: 0.4rem 0;
        }
        .stat-detail {
            margin: 0.4rem 0;
            line-height: 1.5;
            color: var(--text-color);
            font-size: 0.95rem;
        }
        .source-note {
            font-size: 0.8rem;
            color: #8B949E;
            margin-top: 0.8rem;
            font-style: italic;
        }
        
        /* Table Styles for Mobile */
        .table-container {
            overflow-x: auto;
            margin: 1.2rem 0;
            border-radius: 8px;
            border: 1px solid var(--border-color);
        }
        .data-table {
            width: 100%;
            border-collapse: collapse;
            min-width: 600px; /* Minimum width for readability */
        }
        .data-table th, .data-table td {
            padding: 0.6rem;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
            font-size: 0.9rem;
        }
        .data-table th {
            background-color: var(--bg-color);
            font-weight: 600;
            color: var(--primary-color);
            position: sticky;
            left: 0;
        }
        .data-table tr:hover {
            background-color: rgba(88, 166, 255, 0.05);
        }
        
        /* Chart Container */
        .chart-container {
            background-color: var(--bg-color);
            border-radius: 10px;
            padding: 1.2rem;
            margin: 1.2rem 0;
            box-shadow: var(--shadow);
            border: 1px solid var(--border-color);
            position: relative;
            height: 300px;
        }
        
        /* Data Insights */
        .data-insights {
            background-color: var(--bg-color);
            border-radius: 10px;
            padding: 1.2rem;
            margin: 1.2rem 0;
            box-shadow: var(--shadow);
            border: 1px solid var(--primary-color);
        }
        .data-insights h4 {
            color: var(--secondary-color);
            margin-bottom: 0.8rem;
            font-size: 1.1rem;
        }
        .data-insights p {
            margin-bottom: 0.8rem;
            line-height: 1.5;
            font-size: 0.95rem;
        }
        
        /* Export Modal for Mobile */
        #exportModal {
            display: none;
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--card-bg);
            border-top: 1px solid var(--primary-color);
            border-radius: 10px 10px 0 0;
            padding: 1rem;
            box-shadow: 0 -4px 12px rgba(0,0,0,0.5);
            z-index: 1000;
            max-height: 70vh;
            overflow-y: auto;
        }
        #exportModal h4 {
            margin: 0 0 0.8rem;
            color: var(--primary-color);
            font-size: 1.1rem;
            text-align: center;
        }
        #exportModal button {
            display: block;
            width: 100%;
            padding: 0.8rem;
            margin: 0.4rem 0;
            background: rgba(88,166,255,0.1);
            color: var(--text-color);
            border: 1px solid var(--primary-color);
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.95rem;
            text-align: left;
        }
        #exportModal button:hover {
            background: rgba(88,166,255,0.2);
        }
        #exportModal .close-btn {
            background: var(--secondary-color);
            color: white;
            border: none;
            margin-top: 0.6rem;
            text-align: center;
        }
        
        /* Footer */
        footer {
            background-color: var(--card-bg);
            color: var(--text-color);
            padding: 2rem 0 1rem;
            margin-top: 2rem;
            border-top: 1px solid var(--border-color);
        }
        .footer-content {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1.5rem;
            margin-bottom: 1.5rem;
        }
        .footer-section h3 {
            margin-bottom: 0.8rem;
            font-size: 1.2rem;
            color: var(--primary-color);
        }
        .footer-section p, .footer-section a {
            margin-bottom: 0.5rem;
            color: #8B949E;
            font-size: 0.9rem;
        }
        .footer-section a {
            display: block;
            text-decoration: none;
        }
        .footer-section a:hover {
            color: var(--primary-color);
        }
        .social-links {
            display: flex;
            gap: 0.8rem;
            margin-top: 0.8rem;
        }
        .social-links a {
            display: inline-block;
            color: var(--text-color);
            background-color: rgba(255, 255, 255, 0.1);
            width: 35px;
            height: 35px;
            border-radius: 50%;
            text-align: center;
            line-height: 35px;
            transition: background-color 0.3s;
            font-size: 0.9rem;
        }
        .social-links a:hover {
            background-color: rgba(255, 255, 255, 0.2);
            color: var(--primary-color);
        }
        .footer-bottom {
            text-align: center;
            padding-top: 1rem;
            border-top: 1px solid var(--border-color);
            font-size: 0.9rem;
        }
        
        /* Responsive Design for Larger Screens */
        @media (min-width: 768px) {
            html {
                font-size: 16px;
            }
            .container {
                padding: 0 20px;
            }
            header {
                padding: 0;
            }
            nav {
                padding: 1rem 0;
                flex-direction: row;
            }
            .logo img {
                height: 40px;
            }
            .logo h1 {
                font-size: 1.5rem;
            }
            .nav-links {
                display: flex;
                flex-direction: row;
                position: static;
                width: auto;
                background: none;
                box-shadow: none;
                border: none;
                padding: 0;
                max-height: none;
                overflow-y: visible;
            }
            .nav-links li {
                margin: 0 0.8rem;
                width: auto;
            }
            .nav-links a {
                padding: 0;
                font-size: 1rem;
            }
            .btn, .export-btn {
                width: auto;
                display: inline-block;
                margin: 0;
            }
            .mobile-menu-btn {
                display: none;
            }
            .page-header {
                padding: 3rem 0;
            }
            .page-header h2 {
                font-size: 2.5rem;
            }
            .breadcrumb li {
                margin: 0 0.5rem;
                font-size: 1rem;
            }
            .demographic-section {
                padding: 2rem;
                margin-bottom: 2rem;
                border-radius: 12px;
            }
            .section-title {
                font-size: 1.5rem;
            }
            .data-grid {
                grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
                gap: 1.5rem;
            }
            .data-card {
                padding: 1.5rem;
                border-radius: 12px;
            }
            .stat-value {
                font-size: 1.8rem;
            }
            .chart-container {
                height: 400px;
                padding: 1.5rem;
                border-radius: 12px;
            }
            .data-insights {
                padding: 1.5rem;
                border-radius: 12px;
            }
            .footer-content {
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
                gap: 2rem;
            }
            #exportModal {
                bottom: 20px;
                right: 20px;
                left: auto;
                max-width: 300px;
                border-radius: 10px;
                border-top: 1px solid var(--primary-color);
            }
        }
        
        @media (min-width: 992px) {
            .container {
                width: 90%;
            }
        }
        
        /* Additional Mobile Optimizations */
        @media (max-width: 480px) {
            .container {
                padding: 0 10px;
            }
            .demographic-section {
                padding: 1rem;
            }
            .section-title {
                font-size: 1.2rem;
            }
            .chart-container {
                height: 250px;
                padding: 1rem;
            }
            .data-table th, .data-table td {
                padding: 0.5rem;
                font-size: 0.85rem;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <nav>
                <div class="logo">
                    <img src="https://media.licdn.com/dms/image/v2/D4E22AQGXMc2SntbjBA/feedshare-shrink_800/B4EZk6G01vHoAk-/0/1757616497506?e=1760572800&v=beta&t=8j9qaS3FBcRpEqrjVREfn2y6DriWCK_IxbIG0HmwhRg" alt="Finedata Logo">
                    <h1>Finedatas</h1>
                </div>
                <button class="mobile-menu-btn">
                    <i class="fas fa-bars"></i>
                </button>
                <ul class="nav-links">
                    <li><a href="index.html">Home</a></li>
                    <li><a href="economic.html">Economic</a></li>
                    <li><a href="demographic.html" class="active">Demographic</a></li>
                    <li><a href="agricultural.html">Agricultural</a></li>
                    <li><a href="ai-chat.html">AI Chat</a></li>
                    <li><a href="news.html">News</a></li>
                    <li><a href="exchange.html">Exchange Rates</a></li>
                    <li><a href="pdf.html">PDF Resources</a></li>
                    <li><a href="weather.html">For Farmers</a></li>
                    <li><a href="insights.html">Get Forecasts</a></li>
                    <li><a href="support.html">Support</a></li>
                    <li>
                        <button class="export-btn" onclick="showExportOptions()">
                            <i class="fas fa-download"></i> Export Data
                        </button>
                    </li>
                    <li><a href="donate.html" class="btn">Donate</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Export Modal -->
    <div id="exportModal">
        <h4><i class="fas fa-file-export"></i> Export Options</h4>
        <button onclick="exportAllTablesToCSV()"><i class="fas fa-table"></i> All Tables (CSV)</button>
        <button onclick="exportKeyMetricsAsJSON()"><i class="fas fa-code"></i> Key Metrics (JSON)</button>
        <button onclick="exportSummaryAsText()"><i class="fas fa-file-alt"></i> Summary Report (TXT)</button>
        <button class="close-btn" onclick="document.getElementById('exportModal').style.display='none'">
            <i class="fas fa-times"></i> Close
        </button>
    </div>

    <!-- Page Header -->
    <div class="page-header">
        <div class="container">
            <h2>Demographic Data</h2>
            <ul class="breadcrumb">
                <li><a href="index.html">Home</a></li>
                <li>Demographic Data</li>
            </ul>
        </div>
    </div>

    <div class="container">
        <!-- Population Growth Section -->
        <section class="demographic-section" id="population-growth">
            <h3 class="section-title"><i class="fas fa-users"></i> Population Growth (2020-2030)</h3>
            
            <div class="data-insights">
                <h4><i class="fas fa-chart-line"></i> 2025 Population Insights</h4>
                <p>Ethiopia's population is projected to reach <strong>135.49 million</strong> in 2025, with an annual growth rate of <strong>2.55%</strong>. This represents a significant increase from 2020's population of 118.92 million, showing a consistent upward trend despite a gradual slowdown in growth rate.</p>
                <p>The country's demographic transition continues with declining fertility rates (projected at 4.0 births per woman in 2025) and improving life expectancy (67.8 years in 2025). Urbanization is accelerating, with the urban population expected to reach 22.5% of the total by 2025.</p>
            </div>
            
            <div class="chart-container">
                <canvas id="populationChart"></canvas>
            </div>
            
            <h4 style="margin: 1.2rem 0 0.8rem;">Population Trends (2020-2030)</h4>
            <div class="table-container">
                <table class="data-table" id="table-population">
                    <thead>
                        <tr>
                            <th>Year</th>
                            <th>Population (M)</th>
                            <th>Growth (%)</th>
                            <th>Birth Rate</th>
                            <th>Death Rate</th>
                            <th>Net Migration</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>2020</td><td>118.92</td><td>2.71</td><td>32.8</td><td>7.2</td><td>-0.5</td></tr>
                        <tr><td>2021</td><td>122.14</td><td>2.67</td><td>32.3</td><td>7.1</td><td>-0.5</td></tr>
                        <tr><td>2022</td><td>125.38</td><td>2.62</td><td>32.0</td><td>7.0</td><td>-0.6</td></tr>
                        <tr><td>2023</td><td>128.69</td><td>2.60</td><td>31.8</td><td>6.9</td><td>-0.6</td></tr>
                        <tr><td>2024</td><td>132.06</td><td>2.58</td><td>31.5</td><td>6.8</td><td>-0.6</td></tr>
                        <tr><td>2025</td><td>135.49</td><td>2.55</td><td>31.2</td><td>6.7</td><td>-0.7</td></tr>
                        <tr><td>2026</td><td>138.98</td><td>2.52</td><td>30.9</td><td>6.6</td><td>-0.7</td></tr>
                        <tr><td>2027</td><td>142.53</td><td>2.49</td><td>30.6</td><td>6.5</td><td>-0.8</td></tr>
                        <tr><td>2028</td><td>146.14</td><td>2.46</td><td>30.3</td><td>6.4</td><td>-0.8</td></tr>
                        <tr><td>2029</td><td>149.81</td><td>2.43</td><td>30.0</td><td>6.3</td><td>-0.9</td></tr>
                        <tr><td>2030</td><td>153.54</td><td>2.40</td><td>29.7</td><td>6.2</td><td>-0.9</td></tr>
                    </tbody>
                </table>
            </div>
            <p class="source-note">Source: World Bank/UN estimates via FRED</p>
        </section>

        <!-- Population Density by Region -->
        <section class="demographic-section" id="population-density">
            <h3 class="section-title"><i class="fas fa-map-marked-alt"></i> Population Density by Region (2025)</h3>
            
            <div class="data-insights">
                <h4><i class="fas fa-map"></i> 2025 Regional Distribution Insights</h4>
                <p>Ethiopia's population distribution remains highly uneven, with significant concentration in the highland regions. Oromia continues to be the most populous region with an estimated <strong>43.5 million people</strong> in 2025, followed by Amhara with <strong>33.2 million</strong>.</p>
                <p>Addis Ababa maintains the highest population density at approximately <strong>7,100 persons/km²</strong> in 2025, while the Somali and Afar regions continue to have the lowest densities due to arid conditions. Regional development disparities remain a significant challenge for balanced national growth.</p>
            </div>
            
            <div class="chart-container">
                <canvas id="densityChart"></canvas>
            </div>
            
            <h4 style="margin: 1.2rem 0 0.8rem;">Regional Population Density (2025 Projections)</h4>
            <div class="table-container">
                <table class="data-table" id="table-density">
                    <thead>
                        <tr>
                            <th>Region</th>
                            <th>Population (M)</th>
                            <th>Area (km²)</th>
                            <th>Density</th>
                            <th>Growth Rate</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>Addis Ababa</td><td>5.4</td><td>527</td><td>7,100</td><td>3.8%</td></tr>
                        <tr><td>Dire Dawa</td><td>0.64</td><td>1,213</td><td>195</td><td>2.9%</td></tr>
                        <tr><td>Oromia</td><td>43.5</td><td>284,538</td><td>153</td><td>2.8%</td></tr>
                        <tr><td>Amhara</td><td>33.2</td><td>154,709</td><td>215</td><td>2.7%</td></tr>
                        <tr><td>SNNPR</td><td>27.3</td><td>112,343</td><td>243</td><td>2.9%</td></tr>
                        <tr><td>Tigray</td><td>7.6</td><td>50,079</td><td>152</td><td>2.6%</td></tr>
                        <tr><td>Somali</td><td>7.0</td><td>327,068</td><td>21</td><td>2.9%</td></tr>
                        <tr><td>Afar</td><td>2.2</td><td>72,000</td><td>31</td><td>2.4%</td></tr>
                        <tr><td>Benishangul-Gumuz</td><td>1.4</td><td>50,699</td><td>28</td><td>2.7%</td></tr>
                        <tr><td>Gambela</td><td>0.52</td><td>29,783</td><td>17</td><td>2.8%</td></tr>
                        <tr><td>Harari</td><td>0.31</td><td>311</td><td>995</td><td>2.6%</td></tr>
                    </tbody>
                </table>
            </div>
            <p class="source-note">Source: Central Statistical Agency of Ethiopia, 2025 projections</p>
        </section>

        <!-- Additional sections would follow the same pattern -->
        <!-- Data Sources Section -->
        <section class="demographic-section">
            <h3 class="section-title"><i class="fas fa-book"></i> Data Sources</h3>
            <p>Our demographic data is compiled from the following official and international sources:</p>
            <ul style="margin: 1rem 0 1rem 2rem; line-height: 1.8;">
                <li>World Bank/UN Population Division</li>
                <li>FRED Economic Data</li>
                <li>CIA World Factbook</li>
                <li>UNESCO/World Bank literacy statistics</li>
                <li>ILO/World Bank labor estimates</li>
                <li>Ethiopian Labour Survey (ESS)</li>
                <li>Central Statistical Agency of Ethiopia</li>
                <li>World Health Organization (WHO)</li>
                <li>United Nations Children's Fund (UNICEF)</li>
                <li>UNHCR and IOM for migration data</li>
                <li>Ethiopia Demographic and Health Survey (EDHS)</li>
            </ul>
            <p>We strive to provide the most accurate and up-to-date information available.</p>
        </section>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>About Finedatas</h3>
                    <p>Ethiopia's premier data hub providing comprehensive economic, demographic, and agricultural statistics.</p>
                </div>
                <div class="footer-section">
                    <h3>Quick Links</h3>
                    <a href="economic.html">Economic Data</a>
                    <a href="demographic.html">Demographic Data</a>
                    <a href="agricultural.html">Agricultural Data</a>
                    <a href="ai-chat.html">AI Chat</a>
                    <a href="news.html">News</a>
                </div>
                <div class="footer-section">
                    <h3>Contact Us</h3>
                    <p><i class="fas fa-envelope"></i> gabrielmulugeta1@gmail.com</p>
                    <p><i class="fas fa-phone"></i> +251991168917</p>
                    <p><i class="fas fa-map-marker-alt"></i> Addis Ababa, Ethiopia</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Finedatas. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // Mobile menu toggle
        const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
        const navLinks = document.querySelector('.nav-links');
        mobileMenuBtn.addEventListener('click', () => {
            navLinks.classList.toggle('active');
        });
        
        // Close mobile menu when clicking outside
        document.addEventListener('click', (e) => {
            if (!e.target.closest('.nav-links') && !e.target.closest('.mobile-menu-btn')) {
                navLinks.classList.remove('active');
            }
        });
        
        // Show export modal
        function showExportOptions() {
            const modal = document.getElementById('exportModal');
            if (window.innerWidth <= 768) {
                // Mobile: Show modal from bottom
                modal.style.display = 'block';
            } else {
                // Desktop: Show modal in corner
                modal.style.display = 'block';
                setTimeout(() => {
                    if (window.innerWidth > 768) {
                        modal.style.display = 'none';
                    }
                }, 5000);
            }
        }
        
        // Close modal when clicking outside (desktop)
        document.addEventListener('click', (e) => {
            const modal = document.getElementById('exportModal');
            if (window.innerWidth > 768 && modal.style.display === 'block') {
                if (!e.target.closest('#exportModal') && !e.target.closest('.export-btn')) {
                    modal.style.display = 'none';
                }
            }
        });
        
        // Utility: Download file
        function downloadFile(filename, text, mimeType = 'text/plain') {
            const blob = new Blob([text], { type: mimeType });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }
        
        // 1. Export ALL tables as CSV (concatenated)
        function exportAllTablesToCSV() {
            let allCSV = '';
            const tables = document.querySelectorAll('.data-table');
            tables.forEach((table, index) => {
                if (index > 0) allCSV += '\n';
                const sectionTitle = table.closest('.demographic-section').querySelector('.section-title').innerText.trim();
                allCSV += `# ${sectionTitle}\n`;
                let csv = [];
                const rows = table.querySelectorAll('tr');
                for (let i = 0; i < rows.length; i++) {
                    const cols = rows[i].querySelectorAll('td, th');
                    const row = [];
                    for (let j = 0; j < cols.length; j++) {
                        let data = cols[j].innerText.replace(/(\r\n|\n|\r)/gm, ' ').replace(/"/g, '""');
                        if (data.includes(',') || data.includes('"')) {
                            data = `"${data}"`;
                        }
                        row.push(data);
                    }
                    csv.push(row.join(','));
                }
                allCSV += csv.join('\n');
            });
            downloadFile('ethiopia_demographic_data_all_tables.csv', allCSV, 'text/csv');
            if (window.innerWidth <= 768) document.getElementById('exportModal').style.display = 'none';
        }
        
        // 2. Export key metrics from data cards as JSON
        function exportKeyMetricsAsJSON() {
            const cards = document.querySelectorAll('.data-card');
            const metrics = [];
            cards.forEach(card => {
                const metric = card.getAttribute('data-metric');
                const value = card.getAttribute('data-value');
                const detail = card.getAttribute('data-detail') || '';
                if (metric) {
                    metrics.push({ metric, value, detail });
                }
            });
            const jsonString = JSON.stringify(metrics, null, 2);
            downloadFile('demographic_key_metrics.json', jsonString, 'application/json');
            if (window.innerWidth <= 768) document.getElementById('exportModal').style.display = 'none';
        }
        
        // 3. Export summary report as TXT
        function exportSummaryAsText() {
            let report = `Ethiopian Demographic Data Summary\n`;
            report += `Generated by Finedatas - ${new Date().toLocaleDateString('en-ET', { timeZone: 'Africa/Addis_Ababa' })}\n`;
            report += `========================================\n`;
            // Key sections
            const sections = [
                { id: 'population-growth', title: 'Population Growth' },
                { id: 'population-density', title: 'Population Density' }
            ];
            sections.forEach(sec => {
                const section = document.getElementById(sec.id);
                if (section) {
                    report += `${sec.title}:\n`;
                    section.querySelectorAll('.data-card').forEach(card => {
                        const title = card.querySelector('h4').innerText.replace(/[\s\S]*?>/g, '').trim();
                        const value = card.querySelector('.stat-value')?.innerText || 'N/A';
                        const details = Array.from(card.querySelectorAll('.stat-detail'))
                            .map(el => el.innerText)
                            .join('; ');
                        report += `  • ${title}: ${value} (${details})\n`;
                    });
                    report += '\n';
                }
            });
            downloadFile('demographic_summary_report.txt', report);
            if (window.innerWidth <= 768) document.getElementById('exportModal').style.display = 'none';
        }

        // Charts
        document.addEventListener('DOMContentLoaded', function() {
            // Population Growth Chart
            const populationCtx = document.getElementById('populationChart').getContext('2d');
            const populationChart = new Chart(populationCtx, {
                type: 'line',
                data: {
                    labels: ['2020', '2021', '2022', '2023', '2024', '2025', '2026', '2027', '2028', '2029', '2030'],
                    datasets: [{
                        label: 'Population (Millions)',
                        data: [118.92, 122.14, 125.38, 128.69, 132.06, 135.49, 138.98, 142.53, 146.14, 149.81, 153.54],
                        borderColor: '#58A6FF',
                        backgroundColor: 'rgba(88, 166, 255, 0.1)',
                        fill: true,
                        tension: 0.4
                    }, {
                        label: 'Growth Rate (%)',
                        data: [2.71, 2.67, 2.62, 2.60, 2.58, 2.55, 2.52, 2.49, 2.46, 2.43, 2.40],
                        borderColor: '#FF7B72',
                        backgroundColor: 'rgba(255, 123, 114, 0.1)',
                        fill: true,
                        tension: 0.4,
                        yAxisID: 'y1'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: false,
                            title: {
                                display: true,
                                text: 'Population (Millions)'
                            }
                        },
                        y1: {
                            position: 'right',
                            beginAtZero: false,
                            title: {
                                display: true,
                                text: 'Growth Rate (%)'
                            },
                            grid: {
                                drawOnChartArea: false
                            }
                        }
                    }
                }
            });

            // Population Density Chart
            const densityCtx = document.getElementById('densityChart').getContext('2d');
            const densityChart = new Chart(densityCtx, {
                type: 'bar',
                data: {
                    labels: ['Addis Ababa', 'Dire Dawa', 'Amhara', 'SNNPR', 'Oromia', 'Tigray', 'Afar', 'Somali', 'Benishangul-Gumuz', 'Gambela', 'Harari'],
                    datasets: [{
                        label: 'Population Density (persons/km²)',
                        data: [7100, 195, 215, 243, 153, 152, 31, 21, 28, 17, 995],
                        backgroundColor: [
                            'rgba(255, 99, 132, 0.7)',
                            'rgba(54, 162, 235, 0.7)',
                            'rgba(255, 206, 86, 0.7)',
                            'rgba(75, 192, 192, 0.7)',
                            'rgba(153, 102, 255, 0.7)',
                            'rgba(255, 159, 64, 0.7)',
                            'rgba(199, 199, 199, 0.7)',
                            'rgba(83, 102, 255, 0.7)',
                            'rgba(40, 159, 64, 0.7)',
                            'rgba(210, 99, 132, 0.7)',
                            'rgba(102, 159, 255, 0.7)'
                        ],
                        borderColor: [
                            'rgb(255, 99, 132)',
                            'rgb(54, 162, 235)',
                            'rgb(255, 206, 86)',
                            'rgb(75, 192, 192)',
                            'rgb(153, 102, 255)',
                            'rgb(255, 159, 64)',
                            'rgb(199, 199, 199)',
                            'rgb(83, 102, 255)',
                            'rgb(40, 159, 64)',
                            'rgb(210, 99, 132)',
                            'rgb(102, 159, 255)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Density (persons/km²)'
                            }
                        }
                    }
                }
            });
        });
    </script>
</body>
</html>
