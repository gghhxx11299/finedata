<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agricultural Map Dashboard - FineData Ethiopia</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Montserrat:wght@700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="static/css/main.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        /* Map-specific styles */
        #map {
            height: 600px;
            width: 100%;
            border-radius: 12px;
            margin: 20px 0;
            z-index: 1;
        }

        .map-controls {
            display: flex;
            gap: 15px;
            margin: 15px 0;
            flex-wrap: wrap;
        }

        .map-control-btn {
            background-color: var(--card-bg);
            color: var(--text);
            border: 1px solid var(--border);
            padding: 10px 15px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Inter', sans-serif;
        }

        .map-control-btn:hover, .map-control-btn.active {
            background-color: var(--primary);
            color: var(--bg);
            border-color: var(--primary);
        }

        .map-legend {
            background-color: var(--card-bg);
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border: 1px solid var(--border);
        }

        .legend-title {
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--primary);
        }

        .legend-scale {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 5px;
            margin: 5px 0;
        }

        .legend-color {
            width: 20px;
            height: 15px;
            border-radius: 3px;
        }

        .data-section {
            background-color: var(--card-bg);
            border-radius: 12px;
            padding: 2rem;
            margin: 2rem 0;
            box-shadow: var(--shadow);
            border: 1px solid var(--border);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin: 1.5rem 0;
        }

        .stat-card {
            background-color: var(--bg);
            border-radius: 8px;
            padding: 1.2rem;
            text-align: center;
            border-left: 3px solid var(--primary);
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary);
            margin: 0.5rem 0;
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--text-muted);
        }

        .map-overlay {
            position: absolute;
            top: 10px;
            right: 10px;
            z-index: 1000;
            background: var(--card-bg);
            padding: 10px;
            border-radius: 6px;
            border: 1px solid var(--border);
        }

        .map-overlay h4 {
            margin: 0 0 10px 0;
            color: var(--primary);
        }

        .map-overlay-info {
            font-size: 0.9rem;
            color: var(--text-muted);
        }

        @media (max-width: 768px) {
            #map {
                height: 400px;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <nav class="navbar">
                <div class="logo">
                    <img src="https://media.licdn.com/dms/image/v2/D4E22AQGXMc2SntbjBA/feedshare-shrink_800/B4EZmQGRR3HcAg-/0/1757616497506?e=1760572800&v=beta&t=8j9qaS3FBcRpEqrjVREfn2y6DriWCK_IxbIG0HmwhRg" alt="FineData Logo">
                    <h1>FinеData</h1>
                </div>
                <ul class="nav-links">
                    <li><a href="index.html">Home</a></li>
                    <li><a href="economic.html">Economic</a></li>
                    <li><a href="demographic.html">Demographic</a></li>
                    <li><a href="agricultural.html">Agricultural</a></li>
                    <li><a href="exchange.html">Exchange</a></li>
                    <li><a href="weather.html">For Farmers</a></li>
                    <li><a href="insights.html">Get Forecasts</a></li>
                    <li><a href="integration.html" class="active">Map Dashboard</a></li>
                    <li><a href="donate.html" class="btn">Donate</a></li>
                </ul>
                <button class="mobile-menu-btn">
                    <i class="fas fa-bars"></i>
                </button>
            </nav>
        </div>
    </header>

    <!-- Page Header -->
    <div class="page-header">
        <div class="container">
            <h2>Interactive Agricultural Map Dashboard</h2>
            <ul class="breadcrumb">
                <li><a href="index.html">Home</a></li>
                <li>Interactive Map</li>
            </ul>
        </div>
    </div>

    <div class="container">
        <!-- Map Section -->
        <section class="data-section">
            <h3 class="section-title"><i class="fas fa-map-marked-alt"></i> Ethiopia Agricultural Dashboard</h3>
            <p>Interactive map showing real-time agricultural data: rainfall, soil conditions, and crop forecasts across Ethiopia</p>

            <div class="map-controls">
                <button class="map-control-btn active" id="rainfall-btn">Rainfall Data</button>
                <button class="map-control-btn" id="soil-btn">Soil Conditions</button>
                <button class="map-control-btn" id="temperature-btn">Temperature</button>
                <button class="map-control-btn" id="crop-btn">Crop Forecasts</button>
                <button class="map-control-btn" id="toggle-legend">Toggle Legend</button>
            </div>

            <div id="map"></div>

            <div class="map-legend" id="map-legend">
                <div class="legend-title">Rainfall Intensity (mm/day)</div>
                <div class="legend-scale">
                    <div class="legend-item">
                        <div class="legend-color" style="background-color: #ffffff;"></div>
                        <span>0-5mm</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background-color: #d1e3ff;"></div>
                        <span>5-10mm</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background-color: #a3cfff;"></div>
                        <span>10-15mm</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background-color: #58A6FF;"></div>
                        <span>15-20mm</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background-color: #2c5282;"></div>
                        <span>20-30mm</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background-color: #002f5d;"></div>
                        <span>30mm+</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Agricultural Stats -->
        <section class="data-section">
            <h3 class="section-title"><i class="fas fa-chart-bar"></i> Key Agricultural Statistics</h3>
            <div class="stats-grid">
                <div class="stat-card">
                    <i class="fas fa-cloud-rain" style="font-size: 1.5rem; color: var(--primary); margin-bottom: 0.5rem;"></i>
                    <div class="stat-value">125mm</div>
                    <div class="stat-label">Avg. Rainfall (last 30 days)</div>
                </div>
                <div class="stat-card">
                    <i class="fas fa-seedling" style="font-size: 1.5rem; color: var(--primary); margin-bottom: 0.5rem;"></i>
                    <div class="stat-value">284M tons</div>
                    <div class="stat-label">Total Crop Production</div>
                </div>
                <div class="stat-card">
                    <i class="fas fa-temperature-high" style="font-size: 1.5rem; color: var(--primary); margin-bottom: 0.5rem;"></i>
                    <div class="stat-value">22°C</div>
                    <div class="stat-label">Avg. Temperature</div>
                </div>
                <div class="stat-card">
                    <i class="fas fa-tint" style="font-size: 1.5rem; color: var(--primary); margin-bottom: 0.5rem;"></i>
                    <div class="stat-value">75%</div>
                    <div class="stat-label">Soil Moisture Level</div>
                </div>
            </div>
        </section>

        <!-- Recent Updates -->
        <section class="data-section">
            <h3 class="section-title"><i class="fas fa-bolt"></i> Recent Agricultural Updates</h3>
            <div class="data-grid">
                <div class="data-card">
                    <h4><i class="fas fa-cloud-sun-rain"></i> Rainfall Forecast</h4>
                    <p>Expected above-average rainfall in central regions during the next 10 days, beneficial for late-season crops.</p>
                    <div class="insight-meta">Updated: 2 hours ago</div>
                </div>
                <div class="data-card">
                    <h4><i class="fas fa-seedling"></i> Teff Production</h4>
                    <p>Preliminary estimates show 8% increase in teff production compared to last season. Optimal weather conditions contributed to yield.</p>
                    <div class="insight-meta">Updated: 1 day ago</div>
                </div>
                <div class="data-card">
                    <h4><i class="fas fa-wheat-alt"></i> Maize Outlook</h4>
                    <p>Regional maize forecasts indicate potential 5% decrease in production due to irregular rainfall patterns in western zones.</p>
                    <div class="insight-meta">Updated: 2 days ago</div>
                </div>
            </div>
        </section>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>About</h3>
                    <a href="index.html">Home</a>
                    <a href="support.html">Support</a>
                    <a href="pdf.html">PDF Resources</a>
                </div>
                <div class="footer-section">
                    <h3>Data</h3>
                    <a href="economic.html">Economic</a>
                    <a href="demographic.html">Demographic</a>
                    <a href="agricultural.html">Agricultural</a>
                </div>
                <div class="footer-section">
                    <h3>Contact</h3>
                    <p>gabrielmulugeta1@gmail.com</p>
                    <p>+251 991168917</p>
                    <p>Addis Ababa, Ethiopia</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 FineData. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        // Mobile menu toggle
        document.querySelector('.mobile-menu-btn')?.addEventListener('click', () => {
            document.querySelector('.nav-links').classList.toggle('active');
        });

        // Close mobile menu when clicking outside
        document.addEventListener('click', (e) => {
            if (!e.target.closest('.nav-links') && !e.target.closest('.mobile-menu-btn')) {
                document.querySelector('.nav-links').classList.remove('active');
            }
        });

        // Initialize the map
        let map = L.map('map').setView([9.145, 40.4897], 6); // Center on Ethiopia

        // Add OpenStreetMap tiles
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);

        // Create sample data for different map layers
        const rainfallData = [
            {lat: 8.9806, lng: 38.7578, value: 25}, // Addis Ababa area
            {lat: 9.0333, lng: 39.7333, value: 15}, // Harar area
            {lat: 6.0327, lng: 37.3828, value: 35}, // Arba Minch area
            {lat: 13.7972, lng: 38.9722, value: 10}, // Mekele area
            {lat: 11.5950, lng: 37.3850, value: 20}, // Bahir Dar area
            {lat: 6.9848, lng: 42.7421, value: 40}, // Jinka area
        ];

        const soilData = [
            {lat: 8.9806, lng: 38.7578, type: "Nitisols", fertility: 85}, // Addis Ababa area
            {lat: 9.0333, lng: 39.7333, type: "Vertisols", fertility: 70}, // Harar area
            {lat: 6.0327, lng: 37.3828, type: "Acrisols", fertility: 60}, // Arba Minch area
            {lat: 13.7972, lng: 38.9722, type: "Regosols", fertility: 55}, // Mekele area
            {lat: 11.5950, lng: 37.3850, type: "Cambisols", fertility: 75}, // Bahir Dar area
            {lat: 6.9848, lng: 42.7421, type: "Leptosols", fertility: 65}, // Jinka area
        ];

        // Create rainfall layer
        function createRainfallLayer() {
            const rainfallLayer = L.layerGroup();

            rainfallData.forEach(point => {
                let color = '#ffffff';
                if (point.value > 30) color = '#002f5d';
                else if (point.value > 20) color = '#2c5282';
                else if (point.value > 15) color = '#58A6FF';
                else if (point.value > 10) color = '#a3cfff';
                else if (point.value > 5) color = '#d1e3ff';

                const circle = L.circle([point.lat, point.lng], {
                    color: color,
                    fillColor: color,
                    fillOpacity: 0.6,
                    radius: point.value * 1000, // Scale the radius based on value
                    weight: 1
                }).bindPopup(`Rainfall: ${point.value}mm/day`);

                circle.addTo(rainfallLayer);
            });

            return rainfallLayer;
        }

        // Create soil layer
        function createSoilLayer() {
            const soilLayer = L.layerGroup();

            soilData.forEach(point => {
                let color = '#a0522d'; // Brown for soil
                if (point.fertility > 80) color = '#228B22'; // Forest green for high fertility
                else if (point.fertility > 70) color = '#32CD32'; // Lime green
                else if (point.fertility > 60) color = '#ADFF2F'; // Green yellow
                else if (point.fertility > 50) color = '#F0E68C'; // Khaki

                const marker = L.circleMarker([point.lat, point.lng], {
                    color: '#000',
                    fillColor: color,
                    fillOpacity: 0.8,
                    radius: 10
                }).bindPopup(`Soil Type: ${point.type}<br>Fertility: ${point.fertility}%`);

                marker.addTo(soilLayer);
            });

            return soilLayer;
        }

        // Add default rainfall layer to map
        const rainfallLayer = createRainfallLayer();
        rainfallLayer.addTo(map);

        // Add base layer group for all map features
        const baseLayers = {
            "OpenStreetMap": L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
            })
        };

        // Add overlay layers
        const overlays = {
            "Rainfall Data": rainfallLayer,
            "Soil Conditions": createSoilLayer()
        };

        // Add layer control
        L.control.layers(baseLayers, overlays).addTo(map);

        // Add map controls functionality
        document.getElementById('rainfall-btn').addEventListener('click', function() {
            document.querySelectorAll('.map-control-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            this.classList.add('active');

            map.eachLayer(function(layer) {
                if (layer.isRainfallLayer) {
                    map.addLayer(layer);
                } else if (layer.isSoilLayer || layer.isTempLayer || layer.isCropLayer) {
                    map.removeLayer(layer);
                }
            });

            // Add rainfall layer if it doesn't exist
            if (!map.hasLayer(rainfallLayer)) {
                map.addLayer(rainfallLayer);
            }
        });

        document.getElementById('soil-btn').addEventListener('click', function() {
            document.querySelectorAll('.map-control-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            this.classList.add('active');

            const soilLayer = createSoilLayer();
            soilLayer.isSoilLayer = true;

            map.eachLayer(function(layer) {
                if (layer.isSoilLayer) {
                    map.addLayer(layer);
                } else if (layer.isRainfallLayer || layer.isTempLayer || layer.isCropLayer) {
                    map.removeLayer(layer);
                }
            });

            // Add soil layer if it doesn't exist
            if (!map.hasLayer(soilLayer)) {
                map.addLayer(soilLayer);
            }
        });

        // Toggle legend visibility
        document.getElementById('toggle-legend').addEventListener('click', function() {
            const legend = document.getElementById('map-legend');
            if (legend.style.display === 'none' || legend.style.display === '') {
                legend.style.display = 'block';
                this.textContent = 'Hide Legend';
            } else {
                legend.style.display = 'none';
                this.textContent = 'Show Legend';
            }
        });

        // Add 3D effects for interactive elements
        document.addEventListener("DOMContentLoaded", function() {
            // Add 3D hover effect to cards
            const cards = document.querySelectorAll(".data-card, .stat-card, .forecast-card, .card, .insight-item");
            cards.forEach(card => {
                card.addEventListener("mouseenter", function() {
                    this.style.transform = "translateY(-5px) rotateX(5deg) rotateY(5deg)";
                    this.style.transition = "transform 0.3s ease, box-shadow 0.3s ease";
                    this.style.boxShadow = "0 10px 25px rgba(0,0,0,0.3), 0 0 15px rgba(88, 166, 255, 0.5)";
                });

                card.addEventListener("mouseleave", function() {
                    this.style.transform = "translateY(0) rotateX(0) rotateY(0)";
                    this.style.boxShadow = "";
                });
            });

            // Add 3D effect to buttons
            const buttons = document.querySelectorAll(".btn, .map-control-btn, .export-btn");
            buttons.forEach(button => {
                button.addEventListener("mouseenter", function() {
                    this.style.transform = "translateY(-3px) scale(1.05)";
                    this.style.transition = "transform 0.3s ease, box-shadow 0.3s ease";
                    this.style.boxShadow = "0 8px 20px rgba(0,0,0,0.2)";
                });

                button.addEventListener("mouseleave", function() {
                    this.style.transform = "translateY(0) scale(1)";
                    this.style.boxShadow = "";
                });
            });
        });
    </script>
</body>
</html>